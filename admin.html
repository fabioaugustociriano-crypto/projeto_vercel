<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Painel do Dono - Saron Cortinas</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family:'Poppins',sans-serif;
      background:linear-gradient(135deg,#b30000 0%,#444 100%);
      margin:0; padding:20px; color:#333;
    }
    .container {
      max-width:900px; margin:auto;
      background:#fff; padding:30px; border-radius:15px;
      box-shadow:0 6px 15px rgba(0,0,0,.15);
    }
    h1 { text-align:center; color:#b30000; margin-bottom:20px; }
    label { display:block; margin:10px 0 5px; font-weight:600; }
    input, select, textarea {
      width:100%; padding:10px; border:1px solid #ccc;
      border-radius:8px; margin-bottom:15px; font-size:15px;
    }
    button {
      background:#b30000; color:#fff; padding:12px 18px;
      border:none; border-radius:8px; cursor:pointer;
      font-weight:600; transition:0.3s;
    }
    button:hover { background:#800000; }
    .pedido {
      border:1px solid #ddd; border-radius:10px;
      padding:15px; margin:15px 0; background:#fafafa;
    }
    .pedido strong { color:#b30000; }
    .logo { display:block; margin:auto; max-width:200px; }
    img.thumb {
      max-width:100px; border-radius:6px; margin-top:8px; cursor:pointer;
      display:block;
    }
    a.pdf-link {
      display:block; margin-top:8px; font-weight:600;
      color:#b30000; text-decoration:none;
    }
    a.pdf-link:hover { text-decoration:underline; }
    .modal {
      display:none; position:fixed; z-index:1000; left:0; top:0;
      width:100%; height:100%; background:rgba(0,0,0,0.8);
      justify-content:center; align-items:center;
    }
    .modal img { max-width:90%; max-height:90%; border-radius:10px; }
  </style>
</head>
<body>
  <div class="container">
    <img src="WhatsApp Image 2025-08-25 at 20.34.22.jpeg" alt="Saron Cortinas" class="logo">
    <h1>Painel do Dono</h1>

    <h2>Criar Pedido</h2>
    <label>Nome do Cliente:</label>
    <input type="text" id="nome">
    <label>√öltimos 4 d√≠gitos do CPF:</label>
    <input type="text" id="cpf" maxlength="4">
    <label>Descri√ß√£o:</label>
    <textarea id="desc"></textarea>
    <label>Foto (opcional):</label>
    <input type="file" id="foto" accept="image/*">
    <label>PDF (opcional):</label>
    <input type="file" id="pdf" accept="application/pdf">
    <button onclick="criarPedido()">Adicionar Pedido</button>

    <h2>Pedidos Cadastrados</h2>
    <div id="lista"></div>
  </div>

  <!-- Modal Zoom -->
  <div id="modal" class="modal" onclick="this.style.display='none'">
    <img id="modal-img" src="">
  </div>

  <script>
    function carregarPedidos(){
      const pedidos = JSON.parse(localStorage.getItem("pedidos")||"[]");
      const lista = document.getElementById("lista");
      lista.innerHTML = "";
      pedidos.forEach((p,i)=>{
        lista.innerHTML += `
          <div class="pedido">
            <p><strong>Cliente:</strong> ${p.nome}</p>
            <p><strong>CPF:</strong> ****${p.cpf}</p>
            <p><strong>Descri√ß√£o:</strong> ${p.desc}</p>
            <p><strong>Status:</strong> 
              <select onchange="atualizarStatus(${i},this.value)">
                <option ${p.status==="Criado"?"selected":""}>Criado</option>
                <option ${p.status==="Em Produ√ß√£o"?"selected":""}>Em Produ√ß√£o</option>
                <option ${p.status==="Saiu para Entrega"?"selected":""}>Saiu para Entrega</option>
                <option ${p.status==="Saiu para Instala√ß√£o"?"selected":""}>Saiu para Instala√ß√£o</option>
                <option ${p.status==="Entregue na Loja"?"selected":""}>Entregue na Loja</option>
              </select>
            </p>
            ${p.foto ? `<img src="${p.foto}" class="thumb" onclick="abrirModal('${p.foto}')">` : ""}
            ${p.pdf ? `<a href="${p.pdf}" target="_blank" class="pdf-link">üìÑ Ver PDF</a>` : ""}
          </div>
        `;
      });
    }

    function criarPedido(){
      const nome = document.getElementById("nome").value.trim();
      const cpf = document.getElementById("cpf").value.trim();
      const desc = document.getElementById("desc").value.trim();
      const fotoInput = document.getElementById("foto");
      const pdfInput = document.getElementById("pdf");

      if(!nome || !cpf || !desc){
        alert("Preencha todos os campos obrigat√≥rios!");
        return;
      }

      const readerFoto = fotoInput.files[0] ? new FileReader() : null;
      const readerPdf = pdfInput.files[0] ? new FileReader() : null;
      let fotoData = null, pdfData = null;

      function salvar(){
        const pedidos = JSON.parse(localStorage.getItem("pedidos")||"[]");
        pedidos.push({nome, cpf, desc, status:"Criado", foto:fotoData, pdf:pdfData});
        localStorage.setItem("pedidos",JSON.stringify(pedidos));
        carregarPedidos();
        document.getElementById("nome").value="";
        document.getElementById("cpf").value="";
        document.getElementById("desc").value="";
        fotoInput.value="";
        pdfInput.value="";
      }

      if(readerFoto){
        readerFoto.onload = ()=>{ fotoData = readerFoto.result;
          if(!readerPdf) salvar();
        };
        readerFoto.readAsDataURL(fotoInput.files[0]);
      }
      if(readerPdf){
        readerPdf.onload = ()=>{ pdfData = readerPdf.result;
          if(!readerFoto) salvar();
        };
        readerPdf.readAsDataURL(pdfInput.files[0]);
      }
      if(!readerFoto && !readerPdf) salvar();
      if(readerFoto && readerPdf){
        readerFoto.onloadend = ()=>{ fotoData = readerFoto.result;
          readerPdf.onloadend = ()=>{ pdfData = readerPdf.result; salvar(); };
          readerPdf.readAsDataURL(pdfInput.files[0]);
        };
        readerFoto.readAsDataURL(fotoInput.files[0]);
      }
    }

    function atualizarStatus(index,novoStatus){
      const pedidos = JSON.parse(localStorage.getItem("pedidos")||"[]");
      pedidos[index].status = novoStatus;
      localStorage.setItem("pedidos",JSON.stringify(pedidos));
      carregarPedidos();
    }

    function abrirModal(src){
      document.getElementById("modal-img").src = src;
      document.getElementById("modal").style.display="flex";
    }

    carregarPedidos();
  </script>
</body>
</html>
