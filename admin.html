<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Painel do Dono - Pedidos</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f6f8fb;color:#222;margin:0;padding:20px;text-align:center;}
    header{margin-bottom:20px;}
    .logo{max-width:250px;height:auto;display:block;margin:0 auto;}
    .container{max-width:800px;margin:0 auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
    input,select,button{padding:10px;margin:10px;width:100%;border:1px solid #ccc;border-radius:8px;}
    button{background:#b71c1c;color:#fff;font-weight:bold;cursor:pointer;}
    button:hover{background:#8a1313;}
    .pedido{border-bottom:1px solid #ddd;padding:10px;text-align:left;}
  </style>
</head>
<body>
  <header>
    <img src="logo.jpg" alt="Saron Cortinas" class="logo" onerror="this.style.display='none';this.insertAdjacentHTML('afterend','<h2>Saron Cortinas</h2>');">
  </header>

  <div id="login" class="container">
    <h2>Login do Dono</h2>
    <input type="password" id="senha" placeholder="Digite a senha">
    <button onclick="login()">Entrar</button>
  </div>

  <div id="painel" class="container" style="display:none;">
    <h2>Painel de Pedidos</h2>
    <form id="formPedido">
      <input type="text" id="nome" placeholder="Nome do Cliente" required>
      <input type="text" id="cpf" placeholder="Últimos 4 números do CPF" required>
      <select id="status">
        <option value="Criado">Criado</option>
        <option value="Em Produção">Em Produção</option>
        <option value="Saiu para Entrega">Saiu para Entrega</option>
        <option value="Saiu para Instalação">Saiu para Instalação</option>
        <option value="Entregue na Loja">Entregue na Loja</option>
      </select>
      <input type="file" id="arquivo" accept="image/*,application/pdf">
      <button type="submit">Salvar Pedido</button>
    </form>
    <div id="listaPedidos"></div>
  </div>

  <script>
    function login(){
      let senha = document.getElementById("senha").value;
      if(senha === "Batista2025"){
        document.getElementById("login").style.display="none";
        document.getElementById("painel").style.display="block";
        mostrarPedidos();
      } else {
        alert("Senha incorreta!");
      }
    }

    document.getElementById("formPedido").addEventListener("submit", function(e){
      e.preventDefault();
      let nome = document.getElementById("nome").value;
      let cpf = document.getElementById("cpf").value;
      let status = document.getElementById("status").value;
      let arquivoInput = document.getElementById("arquivo");
      let arquivo = arquivoInput.files[0] ? URL.createObjectURL(arquivoInput.files[0]) : "";

      let pedidos = JSON.parse(localStorage.getItem("pedidos")) || [];
      pedidos.push({nome, cpf, status, arquivo});
      localStorage.setItem("pedidos", JSON.stringify(pedidos));
      mostrarPedidos();
      this.reset();
    });

    function mostrarPedidos(){
      let pedidos = JSON.parse(localStorage.getItem("pedidos")) || [];
      let lista = document.getElementById("listaPedidos");
      lista.innerHTML = "";
      pedidos.forEach((p, i) => {
        lista.innerHTML += `<div class="pedido">
          <p><strong>Cliente:</strong> ${p.nome} - <strong>CPF:</strong> ${p.cpf}</p>
          <p><strong>Status:</strong> ${p.status}</p>
          ${p.arquivo ? `<p>Arquivo: <a href="${p.arquivo}" target="_blank">Ver</a></p>` : ""}
        </div>`;
      });
    }
  </script>
</body>
</html>
